// For each controller mode, recursively call the optimizer control horizon number of times